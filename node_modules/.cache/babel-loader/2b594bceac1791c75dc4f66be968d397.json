{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/src/components/pages/timeline/PublishPost.js\",\n    _s = $RefreshSig$(),\n    _templateObject,\n    _templateObject2,\n    _templateObject3,\n    _templateObject4,\n    _templateObject5,\n    _templateObject6,\n    _templateObject7;\n\nimport { useContext, useState } from \"react\";\nimport { createPost, getPosts } from \"../../../service/API\";\nimport styled from \"styled-components\";\nimport Swal from \"sweetalert2\";\nimport UserContext from \"../../../contexts/UserContext\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PublishPost(_ref) {\n  _s();\n\n  var setPosts = _ref.setPosts;\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      link = _useState4[0],\n      setLink = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  function publish(e) {\n    e.preventDefault();\n    setLoading(true);\n    var body = {\n      text: text,\n      link: link\n    };\n    createPost({\n      token: user.token,\n      body: body\n    }).then(function () {\n      getPosts(user.token).then(function (r) {\n        return setPosts(r.data);\n      }).catch(function () {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Ops...\",\n          text: \"Houve uma falha ao obter os posts, por favor atualize a página\"\n        });\n      });\n      setText('');\n      setLink('');\n      setLoading(false);\n    }).catch(function () {\n      setLoading(false);\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: 'Houve um erro ao publicar seu link'\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    onSubmit: publish,\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: '/my-posts',\n      children: /*#__PURE__*/_jsxDEV(ProfileImg, {\n        src: user.user.avatar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PublishForm, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        children: \"O que voc\\xEA tem pra favoritar hoje?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        type: \"url\",\n        required: true,\n        placeholder: \"http://...\",\n        value: link,\n        onChange: function onChange(e) {\n          return setLink(e.target.value);\n        },\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        placeholder: \"Muito irado esse link falando de #javascript\",\n        value: text,\n        onChange: function onChange(e) {\n          return setText(e.target.value);\n        },\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Submit, {\n        disabled: loading,\n        children: \"Publicando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 28\n      }, this) : /*#__PURE__*/_jsxDEV(Submit, {\n        disabled: loading,\n        children: \"Publicar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 80\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PublishPost, \"paf/NtuizVlRZfTiAo/8Cu2aWPc=\");\n\n_c = PublishPost;\nvar Container = styled.section(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    width: 611px;\\n    height: auto;\\n    background-color: #ffffff;\\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\\n    border-radius: 16px;\\n    display: flex;\\n    justify-content: flex-start;\\n    align-items: flex-start;\\n    padding: 18px;\\n    margin-bottom: 30px;\\n\\n    @media (max-width: 620px) {\\n        width: 100%;\\n        height: auto;\\n        border-radius: 0px;\\n        padding: 0px;\\n        justify-content: center;\\n    }\\n\"])));\n_c2 = Container;\nvar ProfileImg = styled.img(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    width: 50px;\\n    height: 50px;\\n    border-radius: 26.5px;\\n    margin-right: 18px;\\n    object-fit: cover;\\n\\n    &:hover {\\n        filter: brightness(0.8);\\n    }\\n\\n    @media (max-width: 620px) {\\n        display: none;\\n    }\\n\"])));\n_c3 = ProfileImg;\nvar PublishForm = styled.form(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n    display: flex;\\n    flex-direction: column;\\n\"])));\n_c4 = PublishForm;\nvar Title = styled.h1(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n    font-size: 20px;\\n    font-weight: 300;\\n    color: #707070;\\n    margin-bottom: 10px;\\n\\n    @media (max-width: 620px) {\\n        width: 100vw;\\n        text-align: center;\\n        margin-top: 10px;\\n    }\\n\"])));\n_c5 = Title;\nvar Input = styled.input(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n    width: 507px;\\n    height: 30px;\\n    font-family: 'Lato', sans-serif;\\n    border: none;\\n    border-radius: 5px;\\n    outline: none;\\n    margin-bottom: 5px;\\n    padding-left: 10px;\\n    display: flex;\\n    background-color: \", \";\\n    pointer-events: \", \";\\n\\n    &::placeholder {\\n        font-family: 'Lato', sans-serif;\\n        font-size: 15px;\\n        font-weight: 300;\\n        color: #949494;\\n    }\\n\\n    @media (max-width: 620px) {\\n        width: auto;\\n        margin: 0px 15px 5px 15px;\\n    }\\n\"])), function (props) {\n  return props.disabled ? '#e5e5e5' : '#efefef';\n}, function (props) {\n  return props.disabled ? 'none' : 'all';\n});\n_c6 = Input;\nvar TextArea = styled.textarea(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n    width: 507px;\\n    height: 56px;\\n    font-family: 'Lato', sans-serif;\\n    border: none;\\n    border-radius: 5px;\\n    outline: none;\\n    margin-bottom: 5px;\\n    padding-left: 10px;\\n    padding-top: 10px;\\n    display: flex;\\n    resize: none;\\n    background-color: \", \";\\n    pointer-events: \", \";\\n\\n    &::placeholder {\\n        font-family: 'Lato', sans-serif;\\n        font-size: 15px;\\n        font-weight: 300;\\n        color: #949494;\\n    }\\n\\n    @media (max-width: 620px) {\\n        width: auto;\\n        margin: 0px 15px 5px 15px;\\n    }\\n\"])), function (props) {\n  return props.disabled ? '#e5e5e5' : '#efefef';\n}, function (props) {\n  return props.disabled ? 'none' : 'all';\n});\n_c7 = TextArea;\nvar Submit = styled.button(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([\"\\n    width: 112px;\\n    height: 31px;\\n    background-color: #1877f2;\\n    border: none;\\n    border-radius: 5px;\\n    align-self: flex-end;\\n    font-size: 14px;\\n    font-weight: 700;\\n    color: #ffffff;\\n    opacity: \", \";\\n    pointer-events: \", \";\\n\\n    &:hover {\\n        cursor: pointer;\\n        filter: brightness(1.1);\\n    }\\n\\n    @media (max-width: 620px) {\\n        height: 22px;\\n        margin-bottom: 10px;\\n        margin-right: 15px;\\n    }\\n\"])), function (props) {\n  return props.disabled ? '0.7' : '1';\n}, function (props) {\n  return props.disabled ? 'none' : 'all';\n});\n_c8 = Submit;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"PublishPost\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"ProfileImg\");\n$RefreshReg$(_c4, \"PublishForm\");\n$RefreshReg$(_c5, \"Title\");\n$RefreshReg$(_c6, \"Input\");\n$RefreshReg$(_c7, \"TextArea\");\n$RefreshReg$(_c8, \"Submit\");","map":{"version":3,"sources":["/home/cadu/Driven/Projetos/Projeto_11_Linkr/src/components/pages/timeline/PublishPost.js"],"names":["useContext","useState","createPost","getPosts","styled","Swal","UserContext","Link","PublishPost","setPosts","user","text","setText","link","setLink","loading","setLoading","publish","e","preventDefault","body","token","then","r","data","catch","fire","icon","title","avatar","target","value","Container","section","ProfileImg","img","PublishForm","form","Title","h1","Input","input","props","disabled","TextArea","textarea","Submit","button"],"mappings":"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","sourcesContent":["import { useContext, useState } from \"react\";\nimport { createPost, getPosts } from \"../../../service/API\";\nimport styled from \"styled-components\";\nimport Swal from \"sweetalert2\";\nimport UserContext from \"../../../contexts/UserContext\";\nimport { Link } from \"react-router-dom\";\n\n\nexport default function PublishPost({ setPosts }) {\n\n    const { user } = useContext(UserContext);\n\n    const [text, setText] = useState('');\n    const [link, setLink] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    function publish(e) {\n        e.preventDefault();\n        setLoading(true);\n\n        const body = {\n            text,\n            link,\n        }\n\n        createPost({ token: user.token, body })\n            .then(() => {\n                getPosts(user.token)\n                    .then((r) => setPosts(r.data))\n                    .catch(() => {\n                        Swal.fire({\n                            icon: \"error\",\n                            title: \"Ops...\",\n                            text: \"Houve uma falha ao obter os posts, por favor atualize a página\"\n                        })\n                    })\n                setText('');\n                setLink('');\n                setLoading(false);\n            })\n            .catch(() => {\n                setLoading(false);\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Oops...',\n                    text: 'Houve um erro ao publicar seu link',\n                })\n            })\n    }\n    \n\n    return (\n        <Container onSubmit={publish}>\n            <Link to={'/my-posts'}>\n                <ProfileImg src={user.user.avatar}></ProfileImg>\n            </Link>\n            <PublishForm>\n                <Title>O que você tem pra favoritar hoje?</Title>\n                <Input\n                    type='url'\n                    required\n                    placeholder='http://...'\n                    value={link}\n                    onChange={(e) => setLink(e.target.value)}\n                    disabled={loading}>\n                </Input>\n                <TextArea\n                    placeholder='Muito irado esse link falando de #javascript'\n                    value={text}\n                    onChange={(e) => setText(e.target.value)}\n                    disabled={loading}>\n                </TextArea>\n                {loading ? <Submit disabled={loading}>Publicando...</Submit> : <Submit disabled={loading}>Publicar</Submit>}\n            </PublishForm>\n        </Container>\n    );\n}\n\nconst Container = styled.section`\n    width: 611px;\n    height: auto;\n    background-color: #ffffff;\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n    border-radius: 16px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: flex-start;\n    padding: 18px;\n    margin-bottom: 30px;\n\n    @media (max-width: 620px) {\n        width: 100%;\n        height: auto;\n        border-radius: 0px;\n        padding: 0px;\n        justify-content: center;\n    }\n`;\n\nconst ProfileImg = styled.img`\n    width: 50px;\n    height: 50px;\n    border-radius: 26.5px;\n    margin-right: 18px;\n    object-fit: cover;\n\n    &:hover {\n        filter: brightness(0.8);\n    }\n\n    @media (max-width: 620px) {\n        display: none;\n    }\n`;\n\nconst PublishForm = styled.form`\n    display: flex;\n    flex-direction: column;\n`;\n\nconst Title = styled.h1`\n    font-size: 20px;\n    font-weight: 300;\n    color: #707070;\n    margin-bottom: 10px;\n\n    @media (max-width: 620px) {\n        width: 100vw;\n        text-align: center;\n        margin-top: 10px;\n    }\n`;\n\nconst Input = styled.input`\n    width: 507px;\n    height: 30px;\n    font-family: 'Lato', sans-serif;\n    border: none;\n    border-radius: 5px;\n    outline: none;\n    margin-bottom: 5px;\n    padding-left: 10px;\n    display: flex;\n    background-color: ${props => props.disabled ? '#e5e5e5' : '#efefef'};\n    pointer-events: ${props => props.disabled ? 'none' : 'all'};\n\n    &::placeholder {\n        font-family: 'Lato', sans-serif;\n        font-size: 15px;\n        font-weight: 300;\n        color: #949494;\n    }\n\n    @media (max-width: 620px) {\n        width: auto;\n        margin: 0px 15px 5px 15px;\n    }\n`;\n\nconst TextArea = styled.textarea`\n    width: 507px;\n    height: 56px;\n    font-family: 'Lato', sans-serif;\n    border: none;\n    border-radius: 5px;\n    outline: none;\n    margin-bottom: 5px;\n    padding-left: 10px;\n    padding-top: 10px;\n    display: flex;\n    resize: none;\n    background-color: ${props => props.disabled ? '#e5e5e5' : '#efefef'};\n    pointer-events: ${props => props.disabled ? 'none' : 'all'};\n\n    &::placeholder {\n        font-family: 'Lato', sans-serif;\n        font-size: 15px;\n        font-weight: 300;\n        color: #949494;\n    }\n\n    @media (max-width: 620px) {\n        width: auto;\n        margin: 0px 15px 5px 15px;\n    }\n`;\n\nconst Submit = styled.button`\n    width: 112px;\n    height: 31px;\n    background-color: #1877f2;\n    border: none;\n    border-radius: 5px;\n    align-self: flex-end;\n    font-size: 14px;\n    font-weight: 700;\n    color: #ffffff;\n    opacity: ${props => props.disabled ? '0.7' : '1'};\n    pointer-events: ${props => props.disabled ? 'none' : 'all'};\n\n    &:hover {\n        cursor: pointer;\n        filter: brightness(1.1);\n    }\n\n    @media (max-width: 620px) {\n        height: 22px;\n        margin-bottom: 10px;\n        margin-right: 15px;\n    }\n`;"]},"metadata":{},"sourceType":"module"}